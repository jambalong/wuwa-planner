<%# locals: (subject_type:, subject_list:, subject: nil, errors: nil) %>

<div class="search-container" data-controller="search-filter">
  <header class="modal-header">
    <h2 class="modal-title">Select
      <%= subject_type %>
    </h2>

    <%# Search Bar Interface %>
    <div class="search-field">
      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" class="search-icon">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="3"
          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
        />
      </svg>

      <input
        type="text"
        data-search-filter-target="input"
        data-action="input->search-filter#filter"
        placeholder="Search by name..."
        class="search-input"
      >
    </div>
  </header>

  <%# Scrollable List Area %>
  <div class="subject-list custom-scrollbar">
    <% subject_list.each do |subject| %>
      <div
        data-search-filter-target="subject"
        data-search-name="<%= subject.name %>"
      >
        <%= link_to new_plan_path(subject_type: subject_type, subject_id: subject.id, step: 3), 
            data: { turbo_frame: "modal" }, 
            class: "subject-item" do %>

          <div class="subject-info">
            <div class="subject-icon">
              <%= subject_type == "Resonator" ? "ðŸ‘¤" : "âš”ï¸" %>
            </div>
            <span
              class="subject-name <%= subject.rarity == 5 ? 'rarity-5' : 'rarity-4' %>"
            >
              <%= subject.name %>
            </span>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
